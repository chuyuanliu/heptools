Search.setIndex({"docnames": ["api", "api/alias", "api/eos", "api/math", "api/math/random", "api/root", "api/root/io", "api/root/tree", "guide", "guide/howto", "guide/howto/construct_friend_tree", "guide/performance", "guide/performance/awkward", "index"], "filenames": ["api.rst", "api/alias.rst", "api/eos.rst", "api/math.rst", "api/math/random.rst", "api/root.rst", "api/root/io.rst", "api/root/tree.rst", "guide.rst", "guide/howto.rst", "guide/howto/construct_friend_tree.rst", "guide/performance.rst", "guide/performance/awkward.rst", "index.rst"], "titles": ["API reference", "Type Alias", "EOS", "Mathematics", "Random Number Generators", "ROOT", "Basic I/O", "Tree", "User guide", "How-to", "Construct <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Friend</span></code> Tree", "Performance", "<code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">awkward</span></code>", "HEP tools"], "terms": {"type": [0, 4, 6, 7], "alia": 0, "recordlik": [0, 1, 6, 7], "delayedrecordlik": [0, 1, 6, 7], "uprootsupporteddtyp": [0, 1, 6], "pathlik": [0, 1, 6, 7], "eo": [0, 1, 7], "mathemat": 0, "root": [0, 1, 6, 7, 10], "heptool": [1, 2, 4, 6, 7, 10], "io": [1, 6], "sourc": [1, 2, 4, 6, 7, 10], "A": [1, 4, 6, 7], "map": [1, 7], "from": [1, 4, 6, 7, 10], "string": 1, "arrai": [1, 4, 6, 7, 10], "like": [1, 4, 7, 10], "object": [1, 4, 6, 7, 10], "all": [1, 4, 6, 7], "must": [1, 6], "have": 1, "same": [1, 6, 10, 12], "length": [1, 6, 10], "ak": [1, 6, 7, 12], "panda": [1, 5, 6], "datafram": [1, 6], "dict": [1, 6, 7], "str": [1, 4, 6, 7], "numpi": [1, 6], "ndarrai": [1, 4, 6], "delai": [1, 6, 7], "partit": [1, 6, 7, 10], "dask_awkward": [1, 6], "dask": [1, 7, 10], "dtype": [1, 6, 12], "support": [1, 2, 6], "uproot": [1, 5, 6], "number": [1, 6, 7], "arraylik": [1, 4], "system": [1, 2], "path": [1, 2, 6, 7, 10], "__fspath__": 1, "method": [1, 7], "an": [2, 4, 7, 10], "interfac": 2, "oper": [2, 12], "both": [2, 6], "local": [2, 6], "filesystem": 2, "other": [2, 10], "xrootd": [2, 6], "us": [2, 4, 6, 7, 10, 12], "o": [2, 5], "normpath": 2, "glob": 2, "class": [2, 4, 6, 7, 10], "none": [2, 4, 6, 7], "host": [2, 10], "math": 4, "seedlik": 4, "seed": 4, "sequenc": 4, "int": [4, 6, 7], "iter": [4, 6, 7], "cbrng": 4, "paramet": [4, 6, 7], "The": [4, 6, 7, 10], "kei": [4, 7], "uniform": 4, "low": 4, "0": [4, 7], "high": [4, 5], "1": [4, 12], "distribut": 4, "float": 4, "option": [4, 6, 7, 10], "lower": 4, "close": 4, "bound": 4, "upper": 4, "open": [4, 6, 10], "return": [4, 6, 7, 10], "sampl": 4, "normal": 4, "loc": 4, "scale": 4, "box": 4, "muller": 4, "transform": [4, 6], "In": 4, "extrem": 4, "rare": 4, "case": [4, 12], "2": 4, "53": 4, "mai": 4, "rais": [4, 6], "divid": 4, "zero": [4, 12], "warn": 4, "mean": 4, "standard": 4, "deviat": [4, 7], "refer": [4, 12], "wikipedia": 4, "choic": [4, 12], "p": 4, "given": [4, 6, 7, 12], "If": [4, 6, 7, 12], "i": [4, 5, 7, 12], "choos": 4, "first": 4, "dimens": 4, "were": 4, "np": [4, 6, 7, 12], "arang": 4, "probabl": 4, "associ": 4, "each": [4, 6, 7, 12], "entri": [4, 6, 7], "assum": 4, "over": [4, 6, 7], "note": [4, 7], "ha": 4, "shape": 4, "x_": 4, "n": 4, "y_": 4, "m": 4, "output": [4, 6, 7], "follow": [4, 6, 7, 10, 11, 12], "land": 4, "level": 5, "tool": 5, "file": [5, 6, 7, 10], "built": 5, "top": 5, "import": [5, 10], "unless": 5, "necessari": 5, "base": 6, "read": [6, 7, 10], "_dask": 6, "write": [6, 10], "writabl": 6, "recreat": 6, "reader": 6, "default": [6, 7, 10], "object_cach": 6, "array_cach": 6, "open_fil": 6, "fals": [6, 7], "timeout": 6, "180": 6, "writer": 6, "alwai": 6, "overwrit": 6, "exist": [6, 7, 10], "test": 6, "fsspec": 6, "_dask_writ": 6, "dask_writ": 6, "new_scalar_object": 6, "treewrit": 6, "name": [6, 7, 10], "event": [6, 7, 10], "parent": 6, "true": [6, 7, 10], "basket_s": 6, "remot": 6, "tbasket": 6, "size": [6, 7, 12], "control": 6, "tree": 6, "bool": [6, 7], "creat": [6, 7], "directori": 6, "new": [6, 7, 10], "extend": 6, "call": [6, 10], "addit": [6, 7], "pass": [6, 7], "chunk": [6, 7, 10], "__call__": 6, "set": [6, 7], "self": [6, 7, 10], "__enter__": 6, "temporari": 6, "__exit__": 6, "exc": 6, "except": [6, 7, 12], "move": 6, "store": [6, 7], "inform": 6, "data": [6, 7, 10, 12], "writabletre": 6, "save_metadata": 6, "metadata": [6, 7, 10], "save": [6, 10], "dictionari": 6, "treeread": [6, 7], "branch_filt": 6, "callabl": [6, 7], "function": [6, 7], "select": [6, 7, 12], "branch": [6, 7, 10], "after": [6, 7], "appli": 6, "librari": [6, 7, 11], "liter": [6, 7], "pd": [6, 7], "repres": [6, 7], "behavior": 6, "tbranch": 6, "hasbranch": 6, "concat": [6, 7], "one": [6, 7], "filter": 6, "add": [6, 7, 10, 12], "multiprocess": 6, "tupl": [6, 7], "One": 6, "more": 6, "concaten": [6, 7], "step": [6, 7, 10], "mode": [6, 7], "ignor": [6, 7], "balanc": [6, 7], "gener": [6, 7], "guarante": 6, "need": 6, "last": [6, 7], "yield": [6, 7], "split": [6, 7], "smaller": [6, 7], "target": [6, 7, 10], "load_metadata": 6, "builtin_typ": 6, "load": [6, 10], "convert": [6, 7, 10], "builtin": 6, "merg": [6, 7, 10], "resiz": [6, 7], "chunk_siz": 6, "writer_opt": 6, "reader_opt": [6, 7], "clean_sourc": 6, "clean": 6, "remov": 6, "list": [6, 7], "num_entri": 7, "entry_start": 7, "entry_stop": [7, 10], "fetch": [7, 10], "ttree": 7, "uuid": [7, 10], "start": [7, 12], "stop": 7, "miss": 7, "immedi": 7, "initi": [7, 10], "special": 7, "ar": [7, 12], "implement": 7, "__hash__": 7, "__eq__": 7, "__len__": 7, "__repr__": 7, "frozenset": 7, "properti": 7, "offset": 7, "equal": 7, "integr": 7, "check": 7, "report": 7, "differ": 7, "out": 7, "rang": 7, "deep": 7, "copi": [7, 12], "correct": 7, "deepcopi": 7, "kwarg": 7, "overrid": 7, "onli": [7, 12], "keep": 7, "slice": 7, "classmethod": 7, "from_path": 7, "executor": 7, "parallel": 7, "least": 7, "provid": 7, "task": 7, "run": [7, 10], "sequenti": 7, "current": 7, "thread": 7, "common": 7, "find": 7, "common_branch": 7, "group": 7, "sum": 7, "order": 7, "preserv": 7, "kept": 7, "total": 7, "piec": 7, "possibl": 7, "try": 7, "anoth": [7, 12], "minim": 7, "averag": 7, "about": [7, 12], "to_json": 7, "json": [7, 10], "from_json": [7, 10], "from_coffea_ev": [7, 10], "when": 7, "coffea": 7, "7": 7, "22": 7, "processor": [7, 10], "runner": 7, "from_coffea_dataset": 7, "dataset": [7, 10], "2023": 7, "12": 7, "dataset_tool": 7, "preprocess": 7, "chain": 7, "tchain": 7, "manag": 7, "multipl": 7, "friend": 7, "structur": [7, 12], "record": [7, 12], "pseudo": 7, "code": 7, "main": 7, "duplic": 7, "found": 7, "renam": 7, "appear": 7, "__iadd__": 7, "__add__": 7, "add_chunk": 7, "thi": [7, 10], "add_friend": 7, "ones": [7, 12], "see": 7, "below": [7, 10], "avail": 7, "nest": 7, "shallow": 7, "friend_onli": 7, "detail": 7, "how": [8, 13], "perform": [8, 10, 13], "To": 10, "scratch": 10, "you": 10, "can": [10, 12], "exampl": [10, 12], "util": 10, "defaultencod": 10, "test_friend": 10, "target_tree_path": 10, "server": 10, "rootfil": 10, "target_tree_nam": 10, "some": [10, 12], "attach": 10, "dump": 10, "test_friend_": 10, "_0_": 10, "w": 10, "f": 10, "cl": 10, "Then": 10, "retriev": 10, "r": 10, "also": [10, 12], "friend_tree_path": 10, "friend_tree_nam": 10, "friendev": 10, "noth": 10, "so": 10, "line": 10, "omit": 10, "insid": 10, "For": [10, 12], "friendtreemak": 10, "processorabc": 10, "def": 10, "process": 10, "test_coffea_friend": 10, "accumul": 10, "wai": 10, "improv": 10, "merged_friend": 10, "100_000": [10, 12], "larg": 10, "comput": 10, "otherprocessor": 10, "__init__": 10, "friend_path": 10, "todo": [10, 12], "match": 10, "back": 10, "up": 10, "These": 11, "document": 11, "describ": 11, "potenti": 11, "issu": 11, "best": 11, "practic": 11, "work": 12, "view": 12, "origin": 12, "layout": 12, "let": 12, "": 12, "simpl": 12, "zip": 12, "x": 12, "int64": 12, "y": 12, "consid": 12, "most": 12, "wrap": 12, "layer": 12, "instead": 12, "make": 12, "random": 12, "10": 12, "nbyte": 12, "3200080": 12, "But": 12, "actual": 12, "6mb": 12, "thei": 12, "share": 12, "content": 12, "instanc": 12, "hold": 12, "execut": 12, "del": 12, "gc": 12, "releas": 12, "until": 12, "delet": 12, "veri": 12, "expens": 12}, "objects": {"heptools.math": [[4, 0, 0, "-", "random"]], "heptools.math.random": [[4, 1, 1, "", "CBRNG"], [4, 3, 1, "", "SeedLike"]], "heptools.math.random.CBRNG": [[4, 2, 1, "", "choice"], [4, 2, 1, "", "normal"], [4, 2, 1, "", "uniform"]], "heptools": [[5, 0, 0, "-", "root"]], "heptools.root.chain": [[7, 1, 1, "", "Chain"]], "heptools.root.chain.Chain": [[7, 2, 1, "", "add_chunk"], [7, 2, 1, "", "add_friend"], [7, 2, 1, "", "concat"], [7, 2, 1, "", "copy"], [7, 2, 1, "", "dask"], [7, 2, 1, "", "iterate"]], "heptools.root.chunk": [[7, 1, 1, "", "Chunk"]], "heptools.root.chunk.Chunk": [[7, 2, 1, "", "balance"], [7, 4, 1, "", "branches"], [7, 2, 1, "", "common"], [7, 2, 1, "", "deepcopy"], [7, 5, 1, "", "entry_start"], [7, 5, 1, "", "entry_stop"], [7, 2, 1, "", "from_coffea_datasets"], [7, 2, 1, "", "from_coffea_events"], [7, 2, 1, "", "from_json"], [7, 2, 1, "", "from_path"], [7, 2, 1, "", "integrity"], [7, 2, 1, "", "key"], [7, 4, 1, "", "name"], [7, 4, 1, "", "num_entries"], [7, 5, 1, "", "offset"], [7, 2, 1, "", "partition"], [7, 4, 1, "", "path"], [7, 2, 1, "", "slice"], [7, 2, 1, "", "to_json"], [7, 4, 1, "", "uuid"]], "heptools.root": [[6, 0, 0, "-", "io"]], "heptools.root.io": [[1, 3, 1, "", "DelayedRecordLike"], [1, 3, 1, "", "RecordLike"], [6, 1, 1, "", "TreeReader"], [6, 1, 1, "", "TreeWriter"], [1, 3, 1, "", "UprootSupportedDtypes"]], "heptools.root.io.TreeReader": [[6, 2, 1, "", "arrays"], [6, 2, 1, "", "concat"], [6, 2, 1, "", "dask"], [6, 2, 1, "", "iterate"], [6, 2, 1, "", "load_metadata"]], "heptools.root.io.TreeWriter": [[6, 2, 1, "", "__call__"], [6, 2, 1, "", "__enter__"], [6, 2, 1, "", "__exit__"], [6, 2, 1, "", "extend"], [6, 2, 1, "", "save_metadata"], [6, 4, 1, "", "tree"]], "heptools.root.merge": [[6, 6, 1, "", "clean"], [6, 6, 1, "", "merge"], [6, 6, 1, "", "move"], [6, 6, 1, "", "resize"]], "heptools.system": [[2, 0, 0, "-", "eos"]], "heptools.system.eos": [[2, 1, 1, "", "EOS"], [1, 3, 1, "", "PathLike"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:data", "4": "py:attribute", "5": "py:property", "6": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "data", "Python data"], "4": ["py", "attribute", "Python attribute"], "5": ["py", "property", "Python property"], "6": ["py", "function", "Python function"]}, "titleterms": {"api": [0, 13], "refer": [0, 13], "type": 1, "alia": 1, "eo": 2, "todo": [2, 6], "mathemat": 3, "random": 4, "number": 4, "gener": 4, "counter": 4, "base": 4, "root": 5, "basic": [6, 10], "i": 6, "o": 6, "ttree": 6, "dask": 6, "tree": [7, 10], "user": [8, 13], "guid": [8, 13], "how": 9, "construct": 10, "friend": 10, "usag": [10, 12], "With": 10, "coffea": 10, "0": 10, "7": 10, "22": 10, "2023": 10, "12": 10, "perform": 11, "awkward": 12, "memori": 12, "count": 12, "multipl": 12, "arrai": 12, "garbag": 12, "collect": 12, "concaten": 12, "hep": 13, "tool": 13, "exampl": 13}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.todo": 2, "sphinx": 60}, "alltitles": {"API reference": [[0, "api-reference"], [13, "api-reference"]], "Type Alias": [[1, "type-alias"]], "EOS": [[2, "module-heptools.system.eos"]], "Todo": [[2, "id1"], [6, "id1"], [6, "id2"], [6, "id3"]], "Mathematics": [[3, "mathematics"]], "Random Number Generators": [[4, "module-heptools.math.random"]], "Counter-based": [[4, "counter-based"]], "ROOT": [[5, "module-heptools.root"]], "Basic I/O": [[6, "module-heptools.root.io"]], "TTree": [[6, "ttree"]], "dask": [[6, "dask"]], "Tree": [[7, "tree"]], "User guide": [[8, "user-guide"], [13, "user-guide"]], "How-to": [[9, "how-to"]], "Construct Friend Tree": [[10, "construct-friend-tree"]], "Basic Usage": [[10, "basic-usage"]], "With coffea<=0.7.22": [[10, "with-coffea-0-7-22"]], "With coffea>=2023.12.0": [[10, "with-coffea-2023-12-0"]], "Performance": [[11, "performance"]], "awkward": [[12, "awkward"]], "Memory Usage": [[12, "memory-usage"]], "Counting Memory for Multiple Arrays": [[12, "counting-memory-for-multiple-arrays"]], "Garbage Collection": [[12, "garbage-collection"]], "Concatenate": [[12, "concatenate"]], "HEP tools": [[13, "hep-tools"]], "Examples": [[13, "examples"]]}, "indexentries": {"delayedrecordlike (in module heptools.root.io)": [[1, "heptools.root.io.DelayedRecordLike"]], "pathlike (in module heptools.system.eos)": [[1, "heptools.system.eos.PathLike"]], "recordlike (in module heptools.root.io)": [[1, "heptools.root.io.RecordLike"]], "uprootsupporteddtypes (in module heptools.root.io)": [[1, "heptools.root.io.UprootSupportedDtypes"]], "eos (class in heptools.system.eos)": [[2, "heptools.system.eos.EOS"]], "heptools.system.eos": [[2, "module-heptools.system.eos"]], "module": [[2, "module-heptools.system.eos"], [4, "module-heptools.math.random"], [5, "module-heptools.root"], [6, "module-heptools.root.io"]], "cbrng (class in heptools.math.random)": [[4, "heptools.math.random.CBRNG"]], "seedlike (in module heptools.math.random)": [[4, "heptools.math.random.SeedLike"]], "choice() (heptools.math.random.cbrng method)": [[4, "heptools.math.random.CBRNG.choice"]], "heptools.math.random": [[4, "module-heptools.math.random"]], "normal() (heptools.math.random.cbrng method)": [[4, "heptools.math.random.CBRNG.normal"]], "uniform() (heptools.math.random.cbrng method)": [[4, "heptools.math.random.CBRNG.uniform"]], "heptools.root": [[5, "module-heptools.root"]], "treereader (class in heptools.root.io)": [[6, "heptools.root.io.TreeReader"]], "treewriter (class in heptools.root.io)": [[6, "heptools.root.io.TreeWriter"]], "__call__() (heptools.root.io.treewriter method)": [[6, "heptools.root.io.TreeWriter.__call__"]], "__enter__() (heptools.root.io.treewriter method)": [[6, "heptools.root.io.TreeWriter.__enter__"]], "__exit__() (heptools.root.io.treewriter method)": [[6, "heptools.root.io.TreeWriter.__exit__"]], "arrays() (heptools.root.io.treereader method)": [[6, "heptools.root.io.TreeReader.arrays"]], "clean() (in module heptools.root.merge)": [[6, "heptools.root.merge.clean"]], "concat() (heptools.root.io.treereader method)": [[6, "heptools.root.io.TreeReader.concat"]], "dask() (heptools.root.io.treereader method)": [[6, "heptools.root.io.TreeReader.dask"]], "extend() (heptools.root.io.treewriter method)": [[6, "heptools.root.io.TreeWriter.extend"]], "heptools.root.io": [[6, "module-heptools.root.io"]], "iterate() (heptools.root.io.treereader method)": [[6, "heptools.root.io.TreeReader.iterate"]], "load_metadata() (heptools.root.io.treereader method)": [[6, "heptools.root.io.TreeReader.load_metadata"]], "merge() (in module heptools.root.merge)": [[6, "heptools.root.merge.merge"]], "move() (in module heptools.root.merge)": [[6, "heptools.root.merge.move"]], "resize() (in module heptools.root.merge)": [[6, "heptools.root.merge.resize"]], "save_metadata() (heptools.root.io.treewriter method)": [[6, "heptools.root.io.TreeWriter.save_metadata"]], "tree (heptools.root.io.treewriter attribute)": [[6, "heptools.root.io.TreeWriter.tree"]], "chain (class in heptools.root.chain)": [[7, "heptools.root.chain.Chain"]], "chunk (class in heptools.root.chunk)": [[7, "heptools.root.chunk.Chunk"]], "add_chunk() (heptools.root.chain.chain method)": [[7, "heptools.root.chain.Chain.add_chunk"]], "add_friend() (heptools.root.chain.chain method)": [[7, "heptools.root.chain.Chain.add_friend"]], "balance() (heptools.root.chunk.chunk class method)": [[7, "heptools.root.chunk.Chunk.balance"]], "branches (heptools.root.chunk.chunk attribute)": [[7, "heptools.root.chunk.Chunk.branches"]], "common() (heptools.root.chunk.chunk class method)": [[7, "heptools.root.chunk.Chunk.common"]], "concat() (heptools.root.chain.chain method)": [[7, "heptools.root.chain.Chain.concat"]], "copy() (heptools.root.chain.chain method)": [[7, "heptools.root.chain.Chain.copy"]], "dask() (heptools.root.chain.chain method)": [[7, "heptools.root.chain.Chain.dask"]], "deepcopy() (heptools.root.chunk.chunk method)": [[7, "heptools.root.chunk.Chunk.deepcopy"]], "entry_start (heptools.root.chunk.chunk property)": [[7, "heptools.root.chunk.Chunk.entry_start"]], "entry_stop (heptools.root.chunk.chunk property)": [[7, "heptools.root.chunk.Chunk.entry_stop"]], "from_coffea_datasets() (heptools.root.chunk.chunk class method)": [[7, "heptools.root.chunk.Chunk.from_coffea_datasets"]], "from_coffea_events() (heptools.root.chunk.chunk class method)": [[7, "heptools.root.chunk.Chunk.from_coffea_events"]], "from_json() (heptools.root.chunk.chunk class method)": [[7, "heptools.root.chunk.Chunk.from_json"]], "from_path() (heptools.root.chunk.chunk class method)": [[7, "heptools.root.chunk.Chunk.from_path"]], "integrity() (heptools.root.chunk.chunk method)": [[7, "heptools.root.chunk.Chunk.integrity"]], "iterate() (heptools.root.chain.chain method)": [[7, "heptools.root.chain.Chain.iterate"]], "key() (heptools.root.chunk.chunk method)": [[7, "heptools.root.chunk.Chunk.key"]], "name (heptools.root.chunk.chunk attribute)": [[7, "heptools.root.chunk.Chunk.name"]], "num_entries (heptools.root.chunk.chunk attribute)": [[7, "heptools.root.chunk.Chunk.num_entries"]], "offset (heptools.root.chunk.chunk property)": [[7, "heptools.root.chunk.Chunk.offset"]], "partition() (heptools.root.chunk.chunk class method)": [[7, "heptools.root.chunk.Chunk.partition"]], "path (heptools.root.chunk.chunk attribute)": [[7, "heptools.root.chunk.Chunk.path"]], "slice() (heptools.root.chunk.chunk method)": [[7, "heptools.root.chunk.Chunk.slice"]], "to_json() (heptools.root.chunk.chunk method)": [[7, "heptools.root.chunk.Chunk.to_json"]], "uuid (heptools.root.chunk.chunk attribute)": [[7, "heptools.root.chunk.Chunk.uuid"]]}})